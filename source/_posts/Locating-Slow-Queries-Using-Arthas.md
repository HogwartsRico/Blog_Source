---
title: 使用Arthas定位慢查询
date: 2019-09-24 11:09:05
tags: Java
---



# 优化待评价的订单数量查询逻辑



最开始是xxxService.getOrderCount这个接口有慢日志日均80, 但是这个接口的调用量远超这个值, 判断是某个场景下触发了慢请求.

用Arthas监控了慢请求的入参, 发现了只有queryScene=WAIT_COMMNET(待评价)时，才会出现慢请求

![](1.jpg)  



查看了这个待评价场景的查询逻辑是有点问题的



![](2.jpg) 



优化点比较简单，主要还是发现问题和定位问题的过程。

后续写一下Arthas的各个案例。 